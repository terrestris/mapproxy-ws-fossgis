"use strict";(self.webpackChunkmapproxy_ws=self.webpackChunkmapproxy_ws||[]).push([[722],{8453:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>i});var s=r(6540);const a={},c=s.createContext(a);function d(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:d(e.components),s.createElement(c.Provider,{value:n},e.children)}},8892:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>u,frontMatter:()=>d,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"exercises/caches","title":"Caches","description":"Aufgabe 1","source":"@site/docs/exercises/03-caches.md","sourceDirName":"exercises","slug":"/exercises/caches","permalink":"/MapProxy_Workshop_Praxiseinsatz/docs/exercises/caches","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Sources","permalink":"/MapProxy_Workshop_Praxiseinsatz/docs/exercises/sources"},"next":{"title":"Seeding","permalink":"/MapProxy_Workshop_Praxiseinsatz/docs/exercises/seeding"}}');var a=r(4848),c=r(8453);const d={},i="Caches",o={},t=[{value:"Aufgabe 1",id:"aufgabe-1",level:2},{value:"Aufgabe 2",id:"aufgabe-2",level:2},{value:"Bonus \ud83c\udf81",id:"bonus-",level:2},{value:"Aufgabe 3",id:"aufgabe-3",level:2}];function l(e){const n={a:"a",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,c.R)(),...e.components},{Details:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"caches",children:"Caches"})}),"\n",(0,a.jsx)(n.h2,{id:"aufgabe-1",children:"Aufgabe 1"}),"\n",(0,a.jsxs)(n.p,{children:["Konfigurieren Sie einen Cache f\xfcr die Source ",(0,a.jsx)(n.code,{children:"dop20_source"})," (zun\xe4chst f\xfcr das Grid ",(0,a.jsx)(n.code,{children:"webmercator"}),"). Stellen Sie anschlie\xdfend die Source f\xfcr den Layer ",(0,a.jsx)(n.code,{children:"dop20"})," auf diesen Cache um.",(0,a.jsx)(n.br,{}),"\n","Erzeugen Sie manuell Requests an den Layer, um den Cache aufzubauen. Hierzu zoomen und panen Sie einfach in der MapProxy Demo oder in QGIS auf dem Layer umher. Die Standard-Caching Konfiguration erzeugt Kacheln im Dateisystem. Vergewissern Sie sich, dass im Ordner ",(0,a.jsx)(n.code,{children:"cache_data"})," ein Unterordner f\xfcr den entsprechenden Layer erstellt wurde und Kacheln abgelegt wurden."]}),"\n",(0,a.jsxs)(r,{children:[(0,a.jsx)("summary",{children:"L\xf6sung"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"layers:\n  - name: dop20\n    title: DOP20 Hamburg\n    sources: [dop20_cache, ortsteile_source]\n\ncaches:\n  dop20_cache:\n    grids: [webmercator]\n    sources: [dop20_source]\n"})})]}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["\u26a1\ufe0f\nBeachten Sie, dass der Layer ",(0,a.jsx)(n.code,{children:"dop20"})," sich zum einen aus dem Cache ",(0,a.jsx)(n.code,{children:"dop20_cache"})," speist und zum anderen aus der Source ",(0,a.jsx)(n.code,{children:"ortsteile_source"}),". Was kann das f\xfcr praktische Gr\xfcnde haben?"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"aufgabe-2",children:"Aufgabe 2"}),"\n",(0,a.jsxs)(n.p,{children:["L\xf6schen Sie den vorhandenen Cache mit ",(0,a.jsx)(n.code,{children:"rm -rf cache_data"}),". Stellen Sie das Cache-Format auf ",(0,a.jsx)(n.code,{children:"sqlite"})," um."]}),"\n",(0,a.jsxs)(r,{children:[(0,a.jsx)("summary",{children:"L\xf6sung"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"caches:\n  dop20_cache:\n    grids: [webmercator]\n    sources: [dop20_source]\n    cache:\n      type: sqlite\n"})})]}),"\n",(0,a.jsxs)(n.p,{children:["Erzeugen Sie manuell Cache Tiles und beobachten Sie das Ergebnis im Cache Ordner. Welche Vorteile hat das ",(0,a.jsx)(n.code,{children:"sqlite"})," Format gegen\xfcber dem Cache Typ ",(0,a.jsx)(n.code,{children:"file"}),"?"]}),"\n",(0,a.jsx)(n.h2,{id:"bonus-",children:"Bonus \ud83c\udf81"}),"\n",(0,a.jsx)(n.h2,{id:"aufgabe-3",children:"Aufgabe 3"}),"\n",(0,a.jsxs)(n.p,{children:["Der Cache wird momentan im default Grid ",(0,a.jsx)(n.code,{children:"webmercator"})," angelegt. Dies soll auf 32N ge\xe4ndert werden.",(0,a.jsx)(n.br,{}),"\n","Definieren Sie ein neues Grid f\xfcr die UTM Zone 32N (EPSG:25833):"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"  utm32_adv:\n    bbox: [-46133.17, 5048875.26857567, 1206211.10142433, 6301219.54]\n    srs: 'EPSG:25832'\n    origin: ul\n    res:\n      - 4891.96981025128\n      - 2445.98490512564\n      - 1222.99245256282\n      - 611.496226281410\n      - 305.748113140705\n      - 152.874056570353\n      - 76.4370282851763\n      - 38.2185141425881\n      - 19.1092570712941\n      - 9.55462853564703\n      - 4.77731426782352\n      - 2.38865713391176\n      - 1.19432856695588\n      - 0.597164283477939\n      - 0.298582141738970\n"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["\u261d Informationen \xfcber das AdV Grid: WMTS Profil unter ",(0,a.jsx)(n.a,{href:"https://www.adv-online.de/AdV-Produkte/Standards-und-Produktblaetter/AdV-Profile/",children:"https://www.adv-online.de/AdV-Produkte/Standards-und-Produktblaetter/AdV-Profile/"})]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Verwenden Sie das neue Grid f\xfcr den Cache ",(0,a.jsx)(n.code,{children:"dop_20_cache"}),"."]}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsxs)(n.p,{children:["\ud83d\udca1 Mit diesem Befehl k\xf6nnen Sie \xfcberpr\xfcfen, welche Grid Definitionen verf\xfcgbar sind:",(0,a.jsx)(n.br,{}),"\n",(0,a.jsx)(n.code,{children:"mapproxy-util grids --all -f mapproxy.yaml"})]}),"\n"]}),"\n",(0,a.jsxs)(r,{children:[(0,a.jsx)("summary",{children:"L\xf6sung"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"caches:\n  dop20_cache:\n    grids: [utm32n_adv]\n    sources: [dop20_source]\n    cache:\n      type: sqlite\n"})})]})]})}function u(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}}}]);